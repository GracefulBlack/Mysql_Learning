## 0.数据库的理解
* 在软件层面，数据库可以帮用户更好的管理数据
 ![[Pasted image 20220915120949.png]]
 * 文件角度
![[Pasted image 20220915121705.png]]

* mysql 是属于应用层的协议
* mysql 需要我们自己安装，系统文件接口之上的一套服务
* 3306 代表的是mysqld 服务
 ![[Pasted image 20220915122834.png]]
 * 客户端 和 服务器
 ![[Pasted image 20220915123231.png]]
 * 数据库的库 + 表都在该路径中（vim /etc/my.cnf）
 ![[Pasted image 20220915124918.png]]
 * 可移植性：在很多份不同操作系统的代码中，通过条件编译穷举出对应操作系统的代码，去除掉其他的代码
* 搜索引擎是支持拔插的，拔插的本质就是让上层的一个父类指针指向一个指针对象
* 数据库跟用户沟通的语句就叫sql语句

## 1.基本操作
* 获取临时密码,改密码的方式每个版本不一样，自己操作
* 可以自己搜索进行免密码登录，比较方便，在此不做过多介绍
```
sudo grep 'temporary password' /var/log/mysqld.log
```
* 登录mysql
```
mysql -uroot -p
```
* 展示数据库
 ```sql
 show database; //注意要加;
 ```
 * 创建数据库
```
create database zkx_db;
```
* 使用某个数据库
```
use XXX; // ->相当于linux上的cd 某个目录
```
* 创建第一份table(表)
* 所谓的创建数据库，本质就是在Linux目录下创建一个目录
* 所谓创建数据库表，本质就是在特定目录下创建特定的文件
 ![[Pasted image 20220915154213.png]]
 ![[Pasted image 20220915154313.png]]
 
 * 描述某个表单
 ```
 desc XXX;
```

* 插入数据以及查询表格
![[Pasted image 20220915170833.png]]

* 我们通常把数据库表的一行叫做一条记录，一列叫做属性

![[Pasted image 20220915171113.png]]


## 2.sql的分类
为什么会有不同的的sql？
* 角色不同时，使用软件的功能不同
* SQL也有种类的不同，原因是使用SQL的人 的需求 是不一样的


* DDL【Data Definition Language】 , 建立表结构，修改表结构，创建表这样的叫做数据定义语言，就相当于C++中的定义一个数据结构，写一个类类似
   代表指令：create , drop , alter
   
* DML【Data Manipulation Language】 ，类似于有人想用写好的数据结构去插入数据，查找数据
  代表指令：insert ,update ,delete
  
* DCL 【Data Control Language 】，凭什么你能定义数据库，插入数据库，能不能的问题就叫做数据控制语言
  代表指令：grant , revoke , commit


## 3.数据库DDL
### 3.1 创建数据库
* 开始之前，vim /etc/my.cnf 设置两条默认字符集
![[Pasted image 20220915191651.png]]
* 如果要显示创建，一个使用utf8（指定字符集）的数据库
 ![[Pasted image 20220915191850.png]]
 * 创建一个数据库，使用utf8指定字符集，使用的校验规则是utf8_general_ci
 ![[Pasted image 20220915192049.png]]
 * 系统默认全局的
 ![[Pasted image 20220915194404.png]]
* 删除数据库
![[Pasted image 20220915194747.png]]

* 两种校验方式的区别
![[Pasted image 20220915195333.png]]

* 我们可以发现utf_general_ci的方式是不区分大小写的

![[Pasted image 20220915195603.png]]
![[Pasted image 20220915195748.png]]

我们接下来在utf8_bin_test中创建相同的表，插入相同的数据，我们在查询单个字符的时候，发现这种校验方法是区分大小写的

![[Pasted image 20220915200920.png]]

![[Pasted image 20220915200937.png]]

排序的方式，不同编码规则，两种也是不同的，一种是忽略大小写的，一种是按照阿斯克码排

![[Pasted image 20220915201310.png]]

### 3.2 显示创建数据库

![[Pasted image 20220915201822.png]]

### 3.3修改数据库
强烈建议：数据库不要轻易改，不然跟着的上层逻辑都要改，数据库要么创建前就全部思考好，要么就对后续如果有修改方案已经做好了准备

![[Pasted image 20220915203618.png]]



### 3.4删除数据库
```
drop database XXX
```
* 对应的数据库文件夹被删除，级联删除，里面的数据会全部被删除


### 3.5 小总结
总的来说，创建删除数据库没什么好说的，修改数据库，改的是什么？是修改它的字符集和校验规则

## 4.表的操作

### 4.1 创建表
* 语义优先，先告诉名字，再告诉类型是什么
* 如果配置好了就不用考虑后面的校验规则和存储引擎
 ![[Pasted image 20220915205052.png]]
 
### 4.2 创建表案例
 ![[Pasted image 20220915210006.png]]
  +\ G 可以省略一些特殊字段
 ![[Pasted image 20220915210224.png]]
![[Pasted image 20220915210722.png]]

### 4.3 修改表
* 实际情况下，强烈不建议在表和数据库已经建立好的情况下再去修改表和数据库，一定要和人沟通清楚
* 用的关键字和改数据库一样还是 ALTER , ADD新增一列， MODIFY修改列信息 ，DROP删掉某列
![[Pasted image 20220918140114.png]]

* 插入两组数据，并且添加一列
* 要插到具体某列后面，写after即可

![[Pasted image 20220918140739.png]]

* 修改表名
![[Pasted image 20220918141744.png]]

* 修改某一个字段
* 就像修改后面的类型 要用 modify
![[Pasted image 20220918143335.png]]

### 4.4 删表
```
drop table 表名
```
![[Pasted image 20220918143509.png]]

## 5.数据类型
* 从外到里，先是最外层的数据库，再深入进入表，现在即将进入表里面的字段
* 数据类型 可以 严格限制 sql操作是严格合法的操作
* 类型是一种约束，白话来讲约束就是限制你，不让你去做某些事情

### 5.1 TINYINT
* 取值范围是-128 ~ 127
![[Pasted image 20220918145152.png]]

### 5.2 TINYINT UNSIGNED

* 无符号TINYINT的取值范围是 0-255
* 如果插入了越界的数据，sql会直接错误

![[Pasted image 20220918145734.png]]

### 5.3 BIT
![[Pasted image 20220918200226.png]]

### 5.4 FLOAT
* float[ (m , d) ] : m指定显示长度，d指定小数位数，占用空间四个字符
* float(4,2) 表示的范围是-99.99 ~ 99.99，MYSQL再保存值进行的是四舍五入的方案
* -99.994也可以插入
![[Pasted image 20220918201408.png]]

* 同样情况，理解float(5,2)也是一样的
* 一共五位数，有两位是小数

![[Pasted image 20220918202443.png]]

### 5.5 FLOAT UNSIGNED
* 不能取负数，但还是m位和n位小数，可以说是取值的范围变小了（对比不带unsigned的情况）

![[Pasted image 20220918203248.png]]

### 5.6 DECIMAL
* 和float的精度一模一样
* float的精度和decimal精度比较没有这么高
* 在后续的情况中，我们使用decimal的频率要比使用float高
* float表示的最大精度大约是7位，decimal整数的最大位数m为65，小数d是30

![[Pasted image 20220918204537.png]]

## 6.字符串类型
* 不要认为字符 == 字节
* 可能在MySQL中，一个字符要用三个字节来存
* 为什么之前学习C语言中一个字符等于一个字节？因为之前写的都是英文字符，用的是阿斯克码表

### 6.1 char
* 一个汉字肯定不是一个字节，和编码有关，在MySQL中一个中文的大小是3个字节，在gbk编码中占的是两个字节，在utf8占4个字节
* 这里的ab 和 中国 不是 字节 是 字符！！！
* char是固定长度字符串，最大长度值可以是255

![[Pasted image 20220918210019.png]]

### 6.2 varchar
* varchar(L),  可变长度字符，表示字符长度，最大长度是 65535 个 字节！ 字节！ 字节 ! 
但有1-3个记录数据大小，所以有效字节是65532
* 无论是中文还是英文，可以插六个字符
* char和varchar的区别（用简单的思维来理解，char可以看成固定数组，varchar可以看成是可以自动扩容的数组，一个定长，一个变长）
* char 是不管你用多少，我就给你这么多
* varchar 是你用多少，我就给你多少
 ![[Pasted image 20220919222750.png]]

### 6.3 日期和实践类型
* date: 日期'yyyy-mm-dd',占用三个字节
* datetime 时间日期格式 'yyyy-mm-dd HH:ii:ss' 表示范围从1000 到 9999 ，占用八个字节
* timestamp: 时间戳，从1970年开始的（70年往前只能用datetime），格式和datetime完全一致（格式一样不代表就一样），占用四个字节

* 在写格式的时候 / ：也是可以的，mysql会帮助自动规整，但是不建议对时间依赖它的默认行为，不要把自己的行为依赖给软件
* 在对表进行操作的时候，时间戳的时间也会根据操作的当前时间进行更新


出现的时间戳问题
![[Pasted image 20220919225404.png]]

### 6.4 enum和set
* enum ：枚举，“单选”类型，将插入值的类型限制在我们选择的范围之中
* 枚举底层插入的还是整数，不像数组的下标是从0开始了，这次是从1开始了
* 插入时非常不推荐使用数字插入，而是插入字符，这样见名知意，可读性强

![[Pasted image 20220919233924.png]]
![[Pasted image 20220919234123.png]]

* set ：集合，“多选”，下载一个app让你选择你喜欢的领域（可以是多个领域）
* 这里插入的数字和枚举不同，插入的如果是1其实是001，2对应的是010，3对应的就是011，以此类推
* find_in_set可以查在集合中的，单纯的select只能查只具有
 ![[Pasted image 20220919235118.png]]
 ![[Pasted image 20220919235312.png]]

奇怪的查询，为什么后面查出来是空呢
游泳像是消失了，这是什么问题？
![[Pasted image 20220919235911.png]]
![[Pasted image 20220920000358.png]]